<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Birthday Cake ğŸ‚</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<style>
body{
    margin:0;
    background:radial-gradient(circle,#1a1a2e,#000);
    color:white;
    text-align:center;
    font-family:Arial, sans-serif;
    overflow-x:hidden;
}
.page{display:none;padding:20px;position:relative;z-index:2;}
.page.active{display:block}

input,select,textarea,button{
    padding:12px;
    width:90%;
    max-width:320px;
    margin:10px auto;
    border:none;
    border-radius:6px;
    font-size:16px;
    display:block;
}
button{background:#ff4081;color:white;}

#scene{width:100%;height:60vh;z-index:2;position:relative;}
canvas.effect{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:1;
}

.poster{
    width:90%;
    max-width:500px;
    margin:20px auto;
    padding:20px;
    border-radius:20px;
    background:linear-gradient(135deg,#ff9a9e,#fad0c4);
    box-shadow:0 0 25px rgba(255,255,255,0.6);
    color:#fff;
}
.poster h2{text-shadow:0 0 10px #000;}
</style>
</head>

<body>

<audio id="bgMusic" loop>
  <source src="birthday_song.mp3" type="audio/mpeg">
</audio>

<!-- PAGE 1 -->
<div class="page active" id="page1">
    <h1>ğŸ‰ Birthday Cake ğŸ‰</h1>
    <input id="userName" placeholder="Birthday Person Name">
    <input id="dob" placeholder="DOB (DD-MM-YYYY)">
    <input id="sender" placeholder="Gift Sender Name">
    <select id="gender">
        <option value="">Select Gender</option>
        <option>Boy</option>
        <option>Girl</option>
    </select>
    <textarea id="wishingMessage" placeholder="Your message"></textarea>
    <h3 id="ageShow"></h3>
    <button onclick="startCake()">Reveal Cake ğŸ‚</button>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
    <canvas class="effect" id="balloonCanvas2"></canvas>
    <canvas class="effect" id="fireworksCanvas"></canvas>
    <div id="scene"></div>

    <button onclick="showMessagePage()">View Message ğŸ’Œ</button>
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
    <canvas class="effect" id="balloonCanvas3"></canvas>

    <h2>Your Birthday Message ğŸ</h2>
    <p id="page3Message"></p>

    <div class="poster">
        <h2 id="posterName"></h2>
        <p id="posterAge"></p>
        <p id="posterDOB"></p>
        <p id="posterWish1"></p>
        <p id="posterWish2"></p>
        <p id="posterWish3"></p>
        <p id="posterSender"></p>
    </div>
</div>

<!-- THREE JS -->
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
/* ================= BALLOON ANIMATION ================= */
function startBalloons(canvasId){
    const canvas=document.getElementById(canvasId);
    const ctx=canvas.getContext("2d");
    resize();

    let balloons=[];
    for(let i=0;i<25;i++){
        balloons.push({
            x:Math.random()*canvas.width,
            y:canvas.height+Math.random()*canvas.height,
            r:20+Math.random()*20,
            speed:1+Math.random()*2,
            color:`hsl(${Math.random()*360},80%,60%)`
        });
    }

    function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        balloons.forEach(b=>{
            ctx.beginPath();
            ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
            ctx.fillStyle=b.color;
            ctx.fill();
            b.y-=b.speed;
            if(b.y<-50){
                b.y=canvas.height+50;
                b.x=Math.random()*canvas.width;
            }
        });
        requestAnimationFrame(draw);
    }
    function resize(){
        canvas.width=window.innerWidth;
        canvas.height=window.innerHeight;
    }
    window.addEventListener("resize",resize);
    draw();
}

/* ================= PAGE LOGIC ================= */
let age=0;
const dob=document.getElementById("dob");
dob.oninput=()=>{
    let p=dob.value.split("-");
    if(p.length===3){
        let b=new Date(p[2],p[1]-1,p[0]);
        let t=new Date();
        age=t.getFullYear()-b.getFullYear();
        document.getElementById("ageShow").innerText="Age: "+age;
    }
}

function showPage(n){
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById("page"+n).classList.add("active");
}

function startCake(){
    showPage(2);
    startBalloons("balloonCanvas2");
    document.getElementById("bgMusic").play().catch(()=>{});
}

const vibes=[
"ğŸˆ Stay happy always!",
"ğŸ‰ Keep shining!",
"âœ¨ Dreams come true!",
"ğŸ’– Lots of love!",
"ğŸŒŸ Enjoy your day!"
];

function showMessagePage(){
    showPage(3);
    startBalloons("balloonCanvas3");

    document.getElementById("page3Message").innerText=wishingMessage.value;
    posterName.innerText=userName.value;
    posterAge.innerText="Age: "+age;
    posterDOB.innerText="DOB: "+dob.value;

    let s=[...vibes].sort(()=>0.5-Math.random());
    posterWish1.innerText=s[0];
    posterWish2.innerText=s[1];
    posterWish3.innerText=s[2];
    posterSender.innerText="From: "+sender.value;
}
</script>
</body>
</html>
